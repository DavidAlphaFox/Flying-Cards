(this.webpackJsonptest=this.webpackJsonptest||[]).push([[0],{27:function(t,e,n){t.exports=n(28)},28:function(t,e,n){"use strict";n.r(e);var a=n(11),r=n(5),c=n(6),o=n(7),i=n(3),s=n(8),u=n(25),l=n(16),d=n(22),p=n(1),f=n.n(p),m=n(15),_=n(26),b=n(23);n(33);var h=["https://upload.wikimedia.org/wikipedia/en/f/f5/RWS_Tarot_08_Strength.jpg","https://upload.wikimedia.org/wikipedia/en/5/53/RWS_Tarot_16_Tower.jpg","https://upload.wikimedia.org/wikipedia/en/9/9b/RWS_Tarot_07_Chariot.jpg","https://upload.wikimedia.org/wikipedia/en/d/db/RWS_Tarot_06_Lovers.jpg","https://upload.wikimedia.org/wikipedia/en/thumb/8/88/RWS_Tarot_02_High_Priestess.jpg/690px-RWS_Tarot_02_High_Priestess.jpg","https://upload.wikimedia.org/wikipedia/en/d/de/RWS_Tarot_01_Magician.jpg"],g=function(t){return{x:0,y:-4*t,scale:1,rot:20*Math.random()-10,delay:100*t}},v=function(t,e){return"perspective(1500px) rotateX(30deg) rotateY(".concat(t/10,"deg) rotateZ(").concat(t,"deg) scale(").concat(e,")")},y=1;function w(t){var e=Object(p.useState)((function(){return new Set})),n=Object(l.a)(e,2),a=n[0],r=n[1],c=Object(m.b)(h.length,(function(t){return Object(u.a)({},g(t),{from:{x:0,rot:0,scale:1.5,y:-1e3,zIndex:0}})})),o=Object(l.a)(c,2),i=o[0],s=o[1];Object(p.useEffect)((function(){r(function(t,e){var n=new Set(t),a=!0,r=!1,c=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done);a=!0){var s=o.value;n.delete(s)}}catch(u){r=!0,c=u}finally{try{a||null==i.return||i.return()}finally{if(r)throw c}}return n}(a,t.data)),s((function(e){return t.data.has(e)?{immediate:!0,zIndex:++y}:{}})),s((function(e){return t.data.has(e)?g(e):{}}))}),[t.data]),Object(p.useEffect)((function(){if(t.clear){var e=new Set([5,4,3,2,1,0]);r((function(){return e})),s((function(t){return e.has(t)?{x:-(100+window.innerWidth),config:{friction:50,tension:200}}:{}})),console.log("clear")}}),[t.clear]);var d=Object(b.a)((function(e){var n=Object(l.a)(e.args,1)[0],r=e.down,c=Object(l.a)(e.movement,1)[0],o=(e.distance,Object(l.a)(e.direction,1)[0]),i=e.velocity,u=o<0?-1:1;!r&&i>.2&&(a.add(n),t.ws&&t.ws.send(JSON.stringify({message:String(n),name:t.name}))),s((function(t){if(n===t){var e=a.has(n);return{x:e?(200+window.innerWidth)*u:r?c:0,rot:c/100+(e?10*u*i:0),scale:r?1.1:1,delay:void 0,config:{friction:50,tension:r?800:e?200:500}}}})),!r&&a.size}));return i.map((function(t,e){var n=t.x,a=t.y,r=t.rot,c=t.scale,o=t.zIndex;return f.a.createElement(_.a.div,{key:e,style:{zIndex:o,transform:Object(m.a)([n,a],(function(t,e){return"translate3d(".concat(t,"px,").concat(e,"px,0)")}))}},f.a.createElement(_.a.div,Object.assign({},d(e),{style:{zIndex:o,transform:Object(m.a)([r,c],v),backgroundImage:"url(".concat(h[e],")")}})))}))}var k=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(o.a)(this,Object(i.a)(e).call(this,t))).state={button_type:"Random"},n}return Object(s.a)(e,t),Object(c.a)(e,[{key:"handel_button_click",value:function(){this.return_value()}},{key:"handel_input_change",value:function(){""===document.getElementById("channel_input").value?this.setState({button_type:"Random"}):this.setState({button_type:"Connect"})}},{key:"return_value",value:function(){var t=document.getElementById("channel_input").value;""===t&&(t=String(parseInt(1e4*Math.random())),document.getElementById("channel_input").value=t),this.props.try_to_connect(t),this.setState({button_type:"Connected on:"})}},{key:"render",value:function(){var t=this;return f.a.createElement("span",{className:"panel"},f.a.createElement("button",{onClick:function(){return t.handel_button_click()}},this.state.button_type),f.a.createElement("input",{id:"channel_input",onChange:function(){return t.handel_input_change()}}))}}]),e}(f.a.Component),j=function(t){function e(t){var n;return Object(r.a)(this,e),(n=Object(o.a)(this,Object(i.a)(e).call(this,t))).update_back_number=n.update_back_number.bind(Object(a.a)(n)),n.try_to_connect=n.try_to_connect.bind(Object(a.a)(n)),n.state={ws:null,back_number:new Set,name:String(parseInt(1e8*Math.random())),clear:!1,connected:!1},n}return Object(s.a)(e,t),Object(c.a)(e,[{key:"try_to_connect",value:function(t){var e=this,n="ws://ws.fastbreakfast.top/ws/chat/";n=n+t+"/";try{this.state.ws.close()}catch(r){}var a=new WebSocket(n);a.onopen=function(){e.setState({ws:a}),console.log("connected on:"+n)},a.onmessage=function(t){var n=JSON.parse(t.data);if(console.log(n),n.name!==e.state.name)if("clear"===n.message)e.setState({clear:!0});else if(n.message.startsWith("number ")){var r=n.message.split(" ")[1];parseInt(r)>2&&!e.state.connected?(console.log("FULL"),a.close(),e.setState({connected:!1})):2!=parseInt(r)||e.state.connected?e.setState({connected:!0}):e.setState({clear:!0,connected:!0})}else{var c=n.message;c=function(t){var e=new Set,n=!0,a=!1,r=void 0;try{for(var c,o=t[Symbol.iterator]();!(n=(c=o.next()).done);n=!0){var i=c.value;e.add(parseInt(i))}}catch(s){a=!0,r=s}finally{try{n||null==o.return||o.return()}finally{if(a)throw r}}return e}(c=new Set(c)),e.setState({back_number:c})}},a.onclose=function(){e.setState({connected:!1}),console.log("disconnected")}}},{key:"update_back_number",value:function(t){this.setState({back_number:t})}},{key:"render",value:function(){return f.a.createElement(f.a.Fragment,null,f.a.createElement(k,{try_to_connect:this.try_to_connect}),f.a.createElement(w,{data:this.state.back_number,ws:this.state.ws,name:this.state.name,clear:this.state.clear}))}}]),e}(f.a.Component);Object(d.render)(f.a.createElement(j,null),document.getElementById("root"))},33:function(t,e,n){}},[[27,1,2]]]);
//# sourceMappingURL=main.c6941681.chunk.js.map